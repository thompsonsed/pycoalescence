
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PyCoalescence package &#8212; PyCoalescence 1.2.5 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/collapsible-lists/css/tree_view.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
    <script type="text/javascript" src="_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    <link rel="shortcut icon" href="_static/PyCoal_favicon_large.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Modules" href="modules.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyCoalescence 1.2.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" accesskey="U">Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-PyCoalescence">
<span id="pycoalescence-package"></span><h1>PyCoalescence package<a class="headerlink" href="#module-PyCoalescence" title="Permalink to this headline">¶</a></h1>
<p>PyCoalescence Package provides the facilities for running spatially-explicit neutral coalescence ecological simulations
and performing basic analysis of the simulation outputs. The program requires the NECSim program to function properly,
which will be included in the package at a later date.</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-PyCoalescence.batch_process">
<span id="batch-process-module"></span><h3>batch_process module<a class="headerlink" href="#module-PyCoalescence.batch_process" title="Permalink to this headline">¶</a></h3>
<p>Contains the operations for performing batch analysis on multiple outputs of a PyCoalescence simulation.</p>
</div>
<div class="section" id="module-PyCoalescence.coal_analyse">
<span id="coal-analyse-module"></span><h3>coal_analyse module<a class="headerlink" href="#module-PyCoalescence.coal_analyse" title="Permalink to this headline">¶</a></h3>
<p>Contains the operations for performing basic analysis on the output of a PyCoalescence simulation.</p>
<dl class="class">
<dt id="PyCoalescence.coal_analyse.Tree">
<em class="property">class </em><code class="descname">Tree</code><span class="sig-paren">(</span><em>database=None</em>, <em>logging_level=30</em>, <em>log_output=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Contains the coalescence tree and performs various calculations of different biodiversity metrics, which are then
stored in the SQLite database.</p>
<p>The general process is</p>
<ul class="simple">
<li>Import the database (<a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.set_database" title="PyCoalescence.coal_analyse.Tree.set_database"><code class="xref py py-meth docutils literal"><span class="pre">set_database()</span></code></a>) and import the comparison data,
if required (<a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.import_comparison_data" title="PyCoalescence.coal_analyse.Tree.import_comparison_data"><code class="xref py py-meth docutils literal"><span class="pre">import_comparison_data()</span></code></a>)</li>
<li>Apply additional speciation rates (if required) using <a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.set_speciation_params" title="PyCoalescence.coal_analyse.Tree.set_speciation_params"><code class="xref py py-meth docutils literal"><span class="pre">set_speciation_params()</span></code></a> and
<a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.apply_speciation" title="PyCoalescence.coal_analyse.Tree.apply_speciation"><code class="xref py py-meth docutils literal"><span class="pre">apply_speciation()</span></code></a></li>
<li>Calculate required metrics (such as <a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.calculate_fragment_richness" title="PyCoalescence.coal_analyse.Tree.calculate_fragment_richness"><code class="xref py py-meth docutils literal"><span class="pre">calculate_fragment_richness()</span></code></a>)</li>
<li>Optionally, calculate the goodness of fit (<a class="reference internal" href="#PyCoalescence.coal_analyse.Tree.calculate_goodness_of_fit" title="PyCoalescence.coal_analyse.Tree.calculate_goodness_of_fit"><code class="xref py py-meth docutils literal"><span class="pre">calculate_goodness_of_fit()</span></code></a>)</li>
</ul>
<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.apply_speciation">
<code class="descname">apply_speciation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.apply_speciation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.apply_speciation" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the list of speciation options and performs the speciation analysis by calling SpeciationCounter.
This must be run after the main coalescence simulations are complete.
It will create additional fields and tables in the SQLite database which contains the requested data.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_comparison_octaves">
<code class="descname">calculate_comparison_octaves</code><span class="sig-paren">(</span><em>store=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_comparison_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_comparison_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the octave classes for the comparison data and for fragments (if required).
If the octaves exist in the FRAGMENT_OCTAVES table in the comparison database, the data will be imported
instead of being re-calculated.</p>
<p>Stores the new octave classes in self.comparison_octaves.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If store is True, will store an EDITED version of the comparison octaves, such that the number of
individuals is equal between the comparison and simulated data.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>store</strong> – if True, stores within the comparison database.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_fragment_abundances">
<code class="descname">calculate_fragment_abundances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_fragment_abundances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_fragment_abundances" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fragment abundances, including equalising with the comparison database, if it has already been
set.</p>
<p>Sets fragment_abundances object.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_fragment_octaves">
<code class="descname">calculate_fragment_octaves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_fragment_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_fragment_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the octave classes for each fragment. Outputs the calculated richness into the SQL database within a
FRAGMENT_OCTAVES table</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_fragment_richness">
<code class="descname">calculate_fragment_richness</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_fragment_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_fragment_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fragment richness and stores it in a new table called FRAGMENT_RICHNESS. Also adds the record to
BIODIVERSITY METRICS for
If the table already exists, it will simply be returned. Each time point and speciation rate combination will be
recorded as a new variable.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_goodness_of_fit">
<code class="descname">calculate_goodness_of_fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_goodness_of_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_goodness_of_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the goodness-of-fit measure based on the calculated biodiversity metrics, scaling each metric by the
number of individuals involved in the metric.</p>
<p>This requires that import_comparison_data() has already been successfully run.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This doesn’t calculate anything for values which have not yet been written to the SQL database -
make sure that the relevant save functions have been run already.</p>
</div>
<p>The resulting value will then be written to the BIODIVERSITY_METRICS table in the SQL database.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_octaves">
<code class="descname">calculate_octaves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the octave classes for the landscape. Outputs the calculated richness into the SQL database within a
FRAGMENT_OCTAVES table.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_octaves_error">
<code class="descname">calculate_octaves_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_octaves_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_octaves_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the error in octaves classes between the simulated data and the comparison data.
Stores each error value as a new entry in BIODIVERSITY_METRICS under fragment_octaves.
Calculates the error by comparing each octave class and summing the relative difference.
Octaves are then averaged for each fragment.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.calculate_richness">
<code class="descname">calculate_richness</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.calculate_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.calculate_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the landscape richness from across all fragments and stores result in a new table in
SPECIES_RICHNESS
Stores a separate result for each speciation rate and time.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.check_biodiversity_table_exists">
<code class="descname">check_biodiversity_table_exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.check_biodiversity_table_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.check_biodiversity_table_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the biodiversity table exists and creates the table if required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the max reference value currently existing</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.clear_calculations">
<code class="descname">clear_calculations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.clear_calculations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.clear_calculations" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the BIODIVERSITY_METRICS and FRAGMENT_OCTAVES tables completely.
.. note:: that this cannot be undone (other than re-running the calculations).</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.dispersal_parameters">
<code class="descname">dispersal_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.dispersal_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.dispersal_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the dispersal parameters from the database and returns them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of the dispersal parameters [sigma, tau, m_probability, cutoff]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.generate_biodiversity_metrics">
<code class="descname">generate_biodiversity_metrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.generate_biodiversity_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.generate_biodiversity_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the biodiversity metrics table, adding in any calculations from the tables FRAGMENT_RICHNESS and
FRAGMENT_OCTAVES.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calls calculate_octaves_error() and calculate_fragment_richness() when required.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_community_parameters">
<code class="descname">get_community_parameters</code><span class="sig-paren">(</span><em>reference=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_community_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_community_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary containing the parameters for the calculated community.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>reference</strong> – the reference key for the calculated parameters. (default is 1)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary containing the speciation_rate, time, fragments and metacommunity_reference</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_community_references">
<code class="descname">get_community_references</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_community_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_community_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a list of all the commuity references already calculated for the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of all calculated community references</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_fragment_octaves">
<code class="descname">get_fragment_octaves</code><span class="sig-paren">(</span><em>fragment=None</em>, <em>speciation_rate=None</em>, <em>time=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_fragment_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_fragment_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pre-calculated octave data for the specified fragment, speciation rate and time. If fragment and
speciation_rate are None, returns the entire FRAGMENT_OCTAVES object
This requires self.calculate_fragment_octaves() to have been run successfully at some point previously.</p>
<p>Returns are of form [id, fragment, time, speciation rate, octave class, number of species]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fragment</strong> – the desired fragment (defaults to None)</li>
<li><strong>speciation_rate</strong> – the desired speciation rate (defaults to None)</li>
<li><strong>time</strong> – the desired generation time (defaults to 0.0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">output from FRAGMENT_OCTAVES for the selected variables</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_fragment_richness">
<code class="descname">get_fragment_richness</code><span class="sig-paren">(</span><em>fragment=None</em>, <em>speciation_rate=None</em>, <em>time=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_fragment_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_fragment_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the fragment richness for each speciation rate and time for the specified simulation. If the fragment
richness has not yet been calculated, it tries to calculate the fragment richness,</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fragment</strong> – the desired fragment (defaults to None)</li>
<li><strong>speciation_rate</strong> – the desired speciation rate (defaults to None)</li>
<li><strong>time</strong> – the desired generation time (defaults to 0.0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first">sqlite3.OperationalError if no table FRAGMENT_ABUNDANCES exists</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first">RuntimeError if no data for the specified fragment, speciation rate and time exists.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list containing the fragment richness</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_goodness_of_fit">
<code class="descname">get_goodness_of_fit</code><span class="sig-paren">(</span><em>fragment=None</em>, <em>speciation_rate=None</em>, <em>time=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_goodness_of_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_goodness_of_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the goodness of fit from the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the full output from the SQL query</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_goodness_of_fit_fragment_octaves">
<code class="descname">get_goodness_of_fit_fragment_octaves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_goodness_of_fit_fragment_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_goodness_of_fit_fragment_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the goodness of fit for fragment octaves from the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>ValueError</strong> – if BIODIVERSITY_METRICS table does not exist.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the full output from the SQL query</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_goodness_of_fit_fragment_richness">
<code class="descname">get_goodness_of_fit_fragment_richness</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_goodness_of_fit_fragment_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_goodness_of_fit_fragment_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the goodness of fit for fragment richness from the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>ValueError</strong> – if BIODIVERSITY_METRICS table does not exist.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the full output from the SQL query</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_job">
<code class="descname">get_job</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the job number (the seed) and the job type (the task identifier).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list containing [seed, job_type (the task identifier)]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_landscape_richness">
<code class="descname">get_landscape_richness</code><span class="sig-paren">(</span><em>speciation_rate=None</em>, <em>time=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_landscape_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_landscape_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the landscape richness from the SPECIES_RICHNESS table in the database. Returns the richness for
each speciation rate and time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This should produce the same result as get_richness(sr, t) with the corresponding sr and t.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Return type of this function changes based on whether speciation rates and times were supplied.
If they were, returns a single integer. Otherwise, returns a list of all species richnesses.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>speciation_rate</strong> – the required speciation rate (optional)</li>
<li><strong>time</strong> – the required time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">either a list containing the speciation_rate, time, richness OR (if specific speciation rate and time
provided), the species richness at that time and speciation rate.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int, list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_metacommunity_parameters">
<code class="descname">get_metacommunity_parameters</code><span class="sig-paren">(</span><em>reference=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_metacommunity_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_metacommunity_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary containing the parameters for the calculated community.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>reference</strong> – the reference key for the calculated parameters. (default is 1)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary containing the speciation_rate, time, fragments and metacommunity_reference</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_metacommunity_references">
<code class="descname">get_metacommunity_references</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_metacommunity_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_metacommunity_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a list of all the metacommuity references already calculated for the simulation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Returns an empty list and logs an error message if the METACOMMUNITY_PARAMETERS table does not exist.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of all calculated metacommunity references</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_octaves">
<code class="descname">get_octaves</code><span class="sig-paren">(</span><em>speciation_rate</em>, <em>time=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_octaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_octaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pre-calculated octave data for the specified speciation rate and time.
This will call self.calculate_octaves() if it hasn’t been called previously.</p>
<p>Returns are of form [id, ‘whole’, time, speciation rate, octave class, number of species]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>speciation_rate</strong> – the desired speciation rate</li>
<li><strong>time</strong> – the desired generation time (defaults to 0.0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">output from FRAGMENT_OCTAVES on the whole landscape for the selected variables</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_parameter_description">
<code class="descname">get_parameter_description</code><span class="sig-paren">(</span><em>key=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_parameter_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_parameter_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the description of the parameter matching the key from those contained in SIMULATION_PARAMETERS</p>
<p>Simply accesses the _parameter_descriptions data stored in parameter_descriptions.json</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">string containing the parameter description or a dict containing all values if no key is supplied</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_richness">
<code class="descname">get_richness</code><span class="sig-paren">(</span><em>speciation_rate=None</em>, <em>time=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the system richness for the supplied speciation rate and time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Richness of 0 is returned if there has been some problem; it is assumed that species richness
will be above 0 for any simulation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Values generated by this method should be identical to those produced by self.get_landscape_richness()</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>speciation_rate</strong> – the required speciation rate</li>
<li><strong>time</strong> – the required time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the system species richness</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_simulation_parameters">
<code class="descname">get_simulation_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_simulation_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_simulation_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the simulation parameters from the database and returns them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a dictionary mapping names to values for seed, job_type, output_dir, spec_rate, sigma, L_value, deme,</td>
</tr>
</tbody>
</table>
<p>sample_size, maxtime, dispersal_relative_cost, min_spec, forest_change_rate, time_since_pristine, time_config,
coarse_map vars, fine map vars, sample_file, gridx, gridy, pristine coarse map, pristine fine map, sim_complete,
dispersal_method, m_probability, cutoff, infinite_landscape, protracted, min_speciation_gen, max_speciation_gen,
dispersal_map</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_species_abundances">
<code class="descname">get_species_abundances</code><span class="sig-paren">(</span><em>fragment=None</em>, <em>speciation_rate=None</em>, <em>time=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_species_abundances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_species_abundances" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the species abundance for a particular fragment, speciation rate and time. If fragment is None, returns the
whole landscape species abundances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fragment</strong> – the fragment to obtain the species abundance of. If None, returns landscape abundances.</li>
<li><strong>speciation_rate</strong> – speciation rate to obtain abundances for</li>
<li><strong>time</strong> – the time to obtain abundances for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of species abundances [reference, species ID, speciation rate, number of individuals, generation]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.get_species_list">
<code class="descname">get_species_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.get_species_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.get_species_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the entirety of the SPECIES_LIST table, returning a tuple with an entry for each row. This can be used to
construct custom analyses of the coalescence tree.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The species list will be produced in an unprocessed format</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of each coalescence and speciation event, with locations, performed in the simulation</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.import_comparison_data">
<code class="descname">import_comparison_data</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.import_comparison_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.import_comparison_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports the SQL database that contains the biodiversity metrics that we want to compare against.</p>
<p>This can either be real data (for comparing simulated data) or other simulated data (for comparing between models).</p>
<p>If the SQL database does not contain the relevant biodiversity metrics, they will be calculated (if possible) or skipped.</p>
<p>The expected form of the database is the same as the BIODIVERSITY_METRICS table, except without any speciation
rates or time references, and a new column containing the number of individuals involved in each metric.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This also equalises the comparison data, so that the number of individuals is equal between the simulated
and comparison datasets.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – the file containing the comparison biodiversity metrics.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.is_completed">
<code class="descname">is_completed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.is_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.is_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether the simulation has been performed to completion, or if the simulation has been paused and
needs to be completed before analysis can be performed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool: true if simulation is complete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.is_protracted">
<code class="descname">is_protracted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.is_protracted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.is_protracted" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether the simulation is a protracted simulation or not. This is read from the completed database file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">boolean, true if the simulation was performed with protracted speciation.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.set_database">
<code class="descname">set_database</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.set_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.set_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the database to the specified file and opens the sqlite connection.</p>
<p>This must be done before any other operations can be performed and the
file must exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>IOError</strong> – if the simulation is not complete, as analysis can only be performed on complete simulations.
However, the database WILL be set before the error is thrown, allowing for analysis of
incomplete simulations if the error is handled correctly.</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – the SQLite database file to import</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.set_speciation_params">
<code class="descname">set_speciation_params</code><span class="sig-paren">(</span><em>record_spatial</em>, <em>record_fragments</em>, <em>speciation_rates</em>, <em>sample_file=None</em>, <em>time_config_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.set_speciation_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.set_speciation_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters for the application of speciation rates. If no config files or time_config files are provided,
they will be taken from the main coalescence simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>str record_spatial</strong> (<em>bool</em><em>,</em>) – a boolean of whether to record spatial data</li>
<li><strong>str record_fragments</strong> (<em>bool</em><em>,</em>) – either a csv file containing fragment data, or T/F for whether fragments should be
calculated from squares of continuous habitat.</li>
<li><strong>speciation_rates</strong> (<em>list</em>) – a list of speciation rates to apply</li>
<li><strong>sample_file</strong> (<em>str</em>) – a sample tif or csv specifying the sampling mask</li>
<li><strong>time_config_file</strong> (<em>str</em>) – a configuration file of temporal sampling points</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>speciation_program='/Users/samthompson/Documents/PhD/Code/PyCoalescence/PyCoalescence/build/default/SpeciationCounter'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the link to the SpeciationCounter program. Defaults to the build/default/SpeciationCounter
:param speciation_program: optionally provide a path to an alternative SpeciationCounter program.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 1.2.4: </span>Deprecated due to movement towards using python API for applying speciation rates.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coal_analyse.Tree.wipe_data">
<code class="descname">wipe_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#Tree.wipe_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.Tree.wipe_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Wipes all calculated data apart from the original, unformatted coalescence tree.
The Speciation_Counter program will have to be re-run to perform any analyses.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyCoalescence.coal_analyse.checkSqlTableExists">
<code class="descname">check_sql_table_exist</code><span class="sig-paren">(</span><em>database</em>, <em>table_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#checkSqlTableExists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.checkSqlTableExists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the supplied table exists in the supplied database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>database</strong> – the database to check existence in</li>
<li><strong>table_name</strong> – the table name to check for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">boolean of whether the table exists</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">bool</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.coal_analyse.collate_fits">
<code class="descname">collate_fits</code><span class="sig-paren">(</span><em>file_dir</em>, <em>filename='Collated_fits.db'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#collate_fits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.collate_fits" title="Permalink to this definition">¶</a></dt>
<dd><p>Collates the goodness of fit values from every file in the specified directory and places them in one new file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Files with ‘collated’ in the name will be ignored.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the output file exists, it will be deleted.</p>
</div>
<p>Creates three separate tables in the output file, one for overall goodness of fit, one for fragment richness fits,
and one for fragment octaves fits.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_dir</strong> – the file directory to examine</li>
<li><strong>filename</strong> – [optional] the output file name.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.coal_analyse.get_parameter_description">
<code class="descname">get_parameter_description</code><span class="sig-paren">(</span><em>key=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coal_analyse.html#get_parameter_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coal_analyse.get_parameter_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the parameter descriptions for the supplied key. If the key is None, returns all keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> – the simulation parameter</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">string containing the parameter description or a dict containing all values if no key is supplied</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PyCoalescence.coalescence">
<span id="coalescence-module"></span><h3>coalescence module<a class="headerlink" href="#module-PyCoalescence.coalescence" title="Permalink to this headline">¶</a></h3>
<p>Contains the Coalescence and Map classes as part of the PyCoalescence Project.</p>
<p>Operations involve setting up and running simulations, plus basic tree generation after simulations have been completed.</p>
<dl class="class">
<dt id="PyCoalescence.coalescence.Coalescence">
<em class="property">class </em><code class="descname">Coalescence</code><span class="sig-paren">(</span><em>logging_level=30</em>, <em>log_output=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A class containing routines to set up and run simulations, including detecting map dimensions from tif files.</p>
<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.add_pristine_map">
<code class="descname">add_pristine_map</code><span class="sig-paren">(</span><em>fine_map</em>, <em>coarse_map</em>, <em>time</em>, <em>rate</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.add_pristine_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.add_pristine_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an extra map to the list of pristine maps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fine_map</strong> – the pristine fine map file to add</li>
<li><strong>coarse_map</strong> – the pristine coarse map file to add</li>
<li><strong>time</strong> – the time to add (when the map is accurate)</li>
<li><strong>rate</strong> – the rate to add (the rate of forest change at this time)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.add_sample_time">
<code class="descname">add_sample_time</code><span class="sig-paren">(</span><em>time</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.add_sample_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.add_sample_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an extra sample time to the list of times.</p>
<p>This allows for multiple temporal sample points from within the same simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>time</strong> – the sample time to add</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.calculate_sql_database">
<code class="descname">calculate_sql_database</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.calculate_sql_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.calculate_sql_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the output database location to self.output_database.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.check_maps">
<code class="descname">check_maps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.check_maps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.check_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the maps all exist and that the file structure makes sense.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first simple">
<li><strong>TypeError</strong> – if a dispersal map or reproduction map is specified, we must have a fine map specified, but
not a coarse map.</li>
<li><strong>IOError</strong> – if one of the required maps does not exist</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.check_sample_map_equals_sample_grid">
<code class="descname">check_sample_map_equals_sample_grid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.check_sample_map_equals_sample_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.check_sample_map_equals_sample_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the grid and sample map are the same size and offset (in which case, future operations can be simplified”
:return:</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.check_simulation_params">
<code class="descname">check_simulation_params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.check_simulation_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.check_simulation_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that simulation parameters have been correctly set and the program is ready for running.
Note that these checks have not been fully tested and are probably unnecessary in a large number of cases.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.check_sql_database">
<code class="descname">check_sql_database</code><span class="sig-paren">(</span><em>expected=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.check_sql_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.check_sql_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the output database exists. If the existance does not match the expected variable, raises an
error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first simple">
<li><strong>FileExistsError</strong> – if the file already exists when it’s not expected to</li>
<li><strong>FileNotExistsError</strong> – if the file does not exist when we expect it to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first last"><strong>expected</strong> – boolean for expected existance of the output file</p>
</td>
</tr>
</tbody>
</table>
<p>:rtype None</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.count_individuals">
<code class="descname">count_individuals</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.count_individuals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.count_individuals" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the number of individuals to be simulated. This may be inaccurate if using multiple time points and
historical maps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a count of the number of individuals to be simulated</td>
</tr>
</tbody>
</table>
<p>:rtype float</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.create_config">
<code class="descname">create_config</code><span class="sig-paren">(</span><em>output_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.create_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.create_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the output config files. This version creates the concise version of the config file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_file</strong> (<em>str</em>) – the file to generate the config option. Must be a path to a .txt file.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.create_map_config">
<code class="descname">create_map_config</code><span class="sig-paren">(</span><em>output_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.create_map_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.create_map_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the map config file from reading the spatial structure of each of the provided files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_file</strong> (<em>str</em>) – the file to output configuration data to (the map config file)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.create_temporal_sampling_config">
<code class="descname">create_temporal_sampling_config</code><span class="sig-paren">(</span><em>config_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.create_temporal_sampling_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.create_temporal_sampling_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the time-sampling config file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_file</strong> – the config file to output to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.detect_map_dimensions">
<code class="descname">detect_map_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.detect_map_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.detect_map_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects all the map dimensions for the provided files (where possible) and sets the respective values.
This is intended to be run after set_map_files()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>TypeError</strong> – if a dispersal map or reproduction map is specified, we must have a fine map specified, but</td>
</tr>
</tbody>
</table>
<p>not a coarse map.
:raises IOError: if one of the required maps does not exist
:raises ValueError: if the dimensions of the dispersal map do not make sense when used with the fine map
provided</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.estimate_ram_usage">
<code class="descname">estimate_ram_usage</code><span class="sig-paren">(</span><em>grid_individuals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.estimate_ram_usage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.estimate_ram_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the RAM usage for the program with the current parameters.</p>
<p>Note this estimates the upper bound of memory usage and is likely inaccurate, especially for simulations with
multiple time sampling points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grid_individuals</strong> – the number of individuals existing on the grid</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the estimated RAM usage in bytes</td>
</tr>
</tbody>
</table>
<p>:rtype float</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.finalise_setup">
<code class="descname">finalise_setup</code><span class="sig-paren">(</span><em>config_default=True</em>, <em>expected=False</em>, <em>ignore_errors=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.finalise_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.finalise_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs all setup routines to provide a complete simulation. Should be called immediately before run_coalescence()
to ensure the simulation setup is complete.
Calls check_simulation_params, generate_command() and run_checks()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config_default</strong> – set to false if want config file to only be created if necessary. Defaults to True</li>
<li><strong>ignore_errors</strong> – if true, any FileNotFoundError and FileExistsError raised by checking the output database</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>are ignored
:param expected: set to true if we expect the output file to exist</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.generate_command">
<code class="descname">generate_command</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.generate_command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.generate_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Completes the setup process by creating the list that will be passed to the c++ executable</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.get_average_density">
<code class="descname">get_average_density</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.get_average_density"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.get_average_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the average density across the fine map, subsetted for the sample grid.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.get_optimised_solution">
<code class="descname">get_optimised_solution</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.get_optimised_solution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.get_optimised_solution" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the optimised solution as a dictionary containing the important optimised variables.
This can be read back in with set_optimised_solution</p>
<p>:return dict containing the important optimised variables
:rtype dict</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.get_protracted">
<code class="descname">get_protracted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.get_protracted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.get_protracted" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets whether the simulation pointed to by this object is a protracted simulation or not.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.get_richness">
<code class="descname">get_richness</code><span class="sig-paren">(</span><em>speciation_rate=None</em>, <em>time=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.get_richness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.get_richness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls coal_analyse.get_richness() with the supplied variables.</p>
<p>Requires successful import of coal_analyse and sqlite3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>speciation_rate</strong> – the speciation rate to extract system richness from.</li>
<li><strong>time</strong> – the time to extract system richness from</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the species richness.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.grid_density_actual">
<code class="descname">grid_density_actual</code><span class="sig-paren">(</span><em>x_off</em>, <em>y_off</em>, <em>x_dim</em>, <em>y_dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.grid_density_actual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.grid_density_actual" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the density total for a subset of the grid by sampling from the fine map.</p>
<p>Note that for large maps this can take a very long time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_off</strong> – the x offset of the grid map subset</li>
<li><strong>y_off</strong> – the y offset of the grid map subset</li>
<li><strong>x_dim</strong> – the x dimension of the grid map subset</li>
<li><strong>y_dim</strong> – the y dimension of the grid map subset</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the total individuals that exist in the subset.</p>
</td>
</tr>
</tbody>
</table>
<p>:rtype int</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.grid_density_estimate">
<code class="descname">grid_density_estimate</code><span class="sig-paren">(</span><em>x_off</em>, <em>y_off</em>, <em>x_dim</em>, <em>y_dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.grid_density_estimate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.grid_density_estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the density total for a subset of the grid by sampling from the fine map</p>
<p>Note that this function is an approximation (based on the average density of the fine map) and does not produce
a perfect value. This is done for performance reasons. The actual value can be obtained with
grid_density_actual().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_off</strong> – the x offset of the grid map subset</li>
<li><strong>y_off</strong> – the y offset of the grid map subset</li>
<li><strong>x_dim</strong> – the x dimension of the grid map subset</li>
<li><strong>y_dim</strong> – the y dimension of the grid map subset</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an estimate of the total individuals that exist in the subset.</p>
</td>
</tr>
</tbody>
</table>
<p>:rtype int</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.import_fine_map_array">
<code class="descname">import_fine_map_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.import_fine_map_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.import_fine_map_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports the fine map array to the in-memory object, subsetted to the same size as the sample grid.
:rtype None</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.import_sample_map_array">
<code class="descname">import_sample_map_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.import_sample_map_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.import_sample_map_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports the sample map array to the in-memory object.
:rtype None</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.load_config">
<code class="descname">load_config</code><span class="sig-paren">(</span><em>config_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.load_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the config file by reading the lines in order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_file</strong> (<em>str</em>) – the config file to read in.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.optimise_ram">
<code class="descname">optimise_ram</code><span class="sig-paren">(</span><em>ram_limit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.optimise_ram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.optimise_ram" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimises the maps for a specific RAM usage.</p>
<p>If ram_limit is None, this function does nothing.</p>
<p>:note This function assumes that the c++ compiler has sizeof(long) = 8 bytes for calculating space usage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ram_limit</strong> – the desired amount of RAM to limit to, in GB</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><strong>MemoryError</strong> – if the desired simulation cannot be compressed into available RAM</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.persistent_ram_usage">
<code class="descname">persistent_ram_usage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.persistent_ram_usage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.persistent_ram_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the persistent RAM usage which cannot be optimised by the program for a particular set of maps
:return: the total persistent RAM usage in bytes</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.resume_coalescence">
<code class="descname">resume_coalescence</code><span class="sig-paren">(</span><em>pause_directory</em>, <em>seed</em>, <em>job_type</em>, <em>max_time</em>, <em>out_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.resume_coalescence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.resume_coalescence" title="Permalink to this definition">¶</a></dt>
<dd><p>Resumes the simulation from the specified directory, looking for the simulation with the specified seed and task
referencing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pause_directory</strong> – the directory to search for the paused simulation</li>
<li><strong>seed</strong> – the seed of the paused simulation</li>
<li><strong>job_type</strong> – the task of the paused simulation</li>
<li><strong>max_time</strong> – the maximum time to run simulations for</li>
<li><strong>out_directory</strong> – optionally provide an alternative output location. Defaults to same location as</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>pause_directory</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.run_checks">
<code class="descname">run_checks</code><span class="sig-paren">(</span><em>expected=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.run_checks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.run_checks" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the simulation is correctly set up and that all the required files exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expected</strong> – set to true if we expect the output file to already exist</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><strong>RuntimeError</strong> – if previous set-up routines are not complete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.run_coalescence">
<code class="descname">run_coalescence</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.run_coalescence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.run_coalescence" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to run the simulation with the given simulation set-up.
This is the main routine performing the actual simulation which will take a considerable amount of time.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.run_from_config">
<code class="descname">run_from_config</code><span class="sig-paren">(</span><em>logger</em>, <em>config_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.run_from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.run_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls NECSim to run from config within a new thread</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>logger</strong> – </li>
<li><strong>config_file</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.run_simple">
<code class="descname">run_simple</code><span class="sig-paren">(</span><em>seed</em>, <em>task</em>, <em>output</em>, <em>alpha</em>, <em>sigma</em>, <em>size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.run_simple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.run_simple" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a simple coalescence simulation on a square infinite landscape with the provided parameters.
This requires a separate compilation of the inf_land version of the coalescence simulator.</p>
<p>Note that this function returns richness=0 for failure to read from the file. It is assumed that there will
be at least one species in the simulation.</p>
<p>Note that the maximum time for this function is set as 10 hours (36000 seconds) and will raise an exception if
the simulation does not complete in this time).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>RuntimeError</strong> – if the simulation didn’t complete in time.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>seed</strong> – the simulation seed</li>
<li><strong>task</strong> – the task (for file naming)</li>
<li><strong>output</strong> – the output directory</li>
<li><strong>alpha</strong> – the speciation rate</li>
<li><strong>sigma</strong> – the normal distribution sigma value for dispersal</li>
<li><strong>size</strong> – the size of the world (so there will be size^2 individuals simulated)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the species richness in the simulation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_map_config">
<code class="descname">set_map_config</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_map_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_map_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a specific map config and tells the program that full commmand-line parsing is not required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> (<em>str</em>) – the file to read map config options from</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_map_files">
<code class="descname">set_map_files</code><span class="sig-paren">(</span><em>sample_file</em>, <em>fine_file=None</em>, <em>coarse_file=None</em>, <em>pristine_fine_file=None</em>, <em>pristine_coarse_file=None</em>, <em>dispersal_map=None</em>, <em>reproduction_map=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_map_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_map_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the map files (or to null, if none specified). It then calls detect_map_dimensions() to correctly read in
the specified dimensions.
Note that if sample_file is “null”, values will remain at 0.
If coarse_file is “null”, it will default to the size of fine_file with zero offset.
If the coarse file is “none”, it will not be used.
If the pristine fine or coarse files are “none”, they will not be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample_file</strong> (<em>str</em>) – the sample map file. Provide “null” if on samplemask is required</li>
<li><strong>fine_file</strong> (<em>str</em>) – the fine map file. Defaults to “null” if none provided</li>
<li><strong>coarse_file</strong> (<em>str</em>) – the coarse map file. Defaults to “none” if none provided</li>
<li><strong>pristine_fine_file</strong> (<em>str</em>) – the pristine fine map file. Defaults to “none” if none provided</li>
<li><strong>pristine_coarse_file</strong> (<em>str</em>) – the pristine coarse map file. Defaults to “none” if none provided</li>
<li><strong>dispersal_map</strong> (<em>str</em>) – the dispersal map for reading dispersal values. Default to “none” if none provided</li>
<li><strong>reproduction_map</strong> (<em>str</em>) – a map of relative reproduction probabilities, at the scale of the fine map</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:rtype None</p>
<p>:return None</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_map_parameters">
<code class="descname">set_map_parameters</code><span class="sig-paren">(</span><em>sample_file</em>, <em>sample_x</em>, <em>sample_y</em>, <em>fine_file</em>, <em>fine_x</em>, <em>fine_y</em>, <em>fine_x_offset</em>, <em>fine_y_offset</em>, <em>coarse_file</em>, <em>coarse_x</em>, <em>coarse_y</em>, <em>coarse_x_offset</em>, <em>coarse_y_offset</em>, <em>coarse_scale</em>, <em>pristine_fine_map</em>, <em>pristine_coarse_map</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_map_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_map_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the map objects with the required parameters. This is required for csv file usage.</p>
<p>Note that this function is not recommended for tif file usage, as it is much simpler to call set_map_files() and
which should automatically calculate map offsets, scaling and dimensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample_file</strong> – the sample file to use, which should contain a boolean mask of where to sample</li>
<li><strong>sample_x</strong> – the x dimension of the sample file</li>
<li><strong>sample_y</strong> – the y dimension of the sample file</li>
<li><strong>fine_file</strong> – the fine map file to use (must be equal to or larger than the sample file)</li>
<li><strong>fine_x</strong> – the x dimension of the fine map file</li>
<li><strong>fine_y</strong> – the y dimension of the fine map file</li>
<li><strong>fine_x_offset</strong> – the x offset of the fine map file</li>
<li><strong>fine_y_offset</strong> – the y offset of the fine map file</li>
<li><strong>coarse_file</strong> – the coarse map file to use (must be equal to or larger than fine map file)</li>
<li><strong>coarse_x</strong> – the x dimension of the coarse map file</li>
<li><strong>coarse_y</strong> – the y dimension of the coarse map file</li>
<li><strong>coarse_x_offset</strong> – the x offset of the coarse map file at the resolution of the fine map</li>
<li><strong>coarse_y_offset</strong> – the y offset of the coarse map file at the resoultion of the fine map</li>
<li><strong>coarse_scale</strong> – the relative scale of the coarse map compared to the fine map (must match x and y scaling)</li>
<li><strong>pristine_fine_map</strong> – the pristine fine map file to use (must have dimensions equal to fine map)</li>
<li><strong>pristine_coarse_map</strong> – the pristine coarse map file to use (must have dimensions equal to coarse map)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_optimised_solution">
<code class="descname">set_optimised_solution</code><span class="sig-paren">(</span><em>dict_in</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_optimised_solution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_optimised_solution" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the optimised RAM solution from the variables in the provided dictionary.
This should contain the grid_x_size, grid_y_size, grid_file_name, sample_x_offset and sample_y_offset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dict_in</strong> (<em>dict</em>) – the dictionary containing the optimised RAM solution variables</td>
</tr>
</tbody>
</table>
<p>:rtype None</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_simulation_params">
<code class="descname">set_simulation_params</code><span class="sig-paren">(</span><em>seed</em>, <em>job_type</em>, <em>output_directory</em>, <em>min_speciation_rate</em>, <em>sigma</em>, <em>tau</em>, <em>deme</em>, <em>sample_size</em>, <em>max_time</em>, <em>dispersal_method=None</em>, <em>m_prob=0.0</em>, <em>cutoff=0</em>, <em>dispersal_relative_cost=1</em>, <em>min_num_species=1</em>, <em>forest_change_rate=0.0</em>, <em>pristine_forest_time=1</em>, <em>time_config_file='null'</em>, <em>restrict_self=False</em>, <em>infinite_landscape=False</em>, <em>protracted=False</em>, <em>min_speciation_gen=None</em>, <em>max_speciation_gen=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_simulation_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_simulation_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set all the simulation parameters apart from the map objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seed</strong> (<em>int</em>) – the unique job number for this simulation set</li>
<li><strong>job_type</strong> (<em>int</em>) – the job type (used for easy file identification after simulations are complete)</li>
<li><strong>output_directory</strong> (<em>str</em>) – the output directory to store the SQL database</li>
<li><strong>min_speciation_rate</strong> (<em>float</em>) – the minimum speciation rate to simulate</li>
<li><strong>sigma</strong> (<em>float</em>) – the dispersal sigma value</li>
<li><strong>tau</strong> (<em>float</em>) – the fat-tailed dispersal tau value</li>
<li><strong>deme</strong> (<em>int</em>) – the deme size (in individuals per cell)</li>
<li><strong>sample_size</strong> (<em>float</em>) – the sample size of the deme (decimal 0-1)</li>
<li><strong>max_time</strong> (<em>float</em>) – the maximum allowed simulation time (in seconds)</li>
<li><strong>dispersal_method</strong> (<em>str</em>) – the dispersal kernel method. Should be one of [normal, fat-tail, norm-uniform]</li>
<li><strong>m_prob</strong> (<em>float</em>) – the probability of drawing from the uniform dispersal. Only relevant for uniform dispersals</li>
<li><strong>cutoff</strong> (<em>float</em>) – the maximum value for the uniform dispersal. Only relevant for uniform dispersals.</li>
<li><strong>dispersal_relative_cost</strong> (<em>float</em>) – the relative cost of travelling through non-habitat (defaults to 1)</li>
<li><strong>min_num_species</strong> (<em>int</em>) – the minimum number of species known to exist (defaults to 1</li>
<li><strong>forest_change_rate</strong> (<em>float</em>) – the rate of forest change over time</li>
<li><strong>pristine_forest_time</strong> (<em>float</em>) – the time in generations since a pristine state was achieved</li>
<li><strong>time_config_file</strong> (<em>str</em>) – the path to the time config file (or null)</li>
<li><strong>restrict_self</strong> (<em>bool</em>) – if true, restricts dispersal from own cell</li>
<li><strong>infinite_landscape</strong> (<em>bool/str</em>) – if false or “closed”, restricts dispersal to the provided maps, otherwise</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>can be “infinite”, or a tiled landscape using “tiled_coarse” or “tiled_fine”.
:param bool protracted: if true, uses protracted speciation application
:param float min_speciation_gen: the minimum amount of time a lineage must exist before speciation occurs.
:param float max_speciation_gen: the maximum amount of time a lineage can exist before speciating.</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.set_speciation_rates">
<code class="descname">set_speciation_rates</code><span class="sig-paren">(</span><em>speciation_rates</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.set_speciation_rates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.set_speciation_rates" title="Permalink to this definition">¶</a></dt>
<dd><p>Add speciation rates for analysis at the end of the simulation. This is optional</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>speciation_rates</strong> (<em>list</em>) – a list of speciation rates to apply at the end of the simulation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>coalescence_simulator='/Users/samthompson/Documents/PhD/Code/PyCoalescence/PyCoalescence/build/default/./NECSim'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the location of the coalescence and speciation executables. Make sure that both programs have been compiled
for the operating system running the simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>coalescence_simulator</strong> (<em>str</em>) – the path to the Coal_v1 executable</td>
</tr>
</tbody>
</table>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 1.2.4: </span>No longer required as of 1.2.4 as all components have been migrated to use Python API</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Coalescence.setup_necsim">
<code class="descname">setup_necsim</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Coalescence.setup_necsim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Coalescence.setup_necsim" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the logging function and the logger object for the necsim object. Enforcing this function is always called
ensures no seg faults occur.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PyCoalescence.coalescence.Map">
<em class="property">class </em><code class="descname">Map</code><span class="sig-paren">(</span><em>file=None</em>, <em>is_sample=None</em>, <em>logging_level=30</em>, <em>dispersal_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A class for the map object, containing the file name and the variables associated with this map object.</p>
<dl class="method">
<dt id="PyCoalescence.coalescence.Map.calculate_offset">
<code class="descname">calculate_offset</code><span class="sig-paren">(</span><em>file_offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.calculate_offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.calculate_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the offset of the map object from the supplied file_offset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_offset</strong> (<em>str/Map</em>) – the path to the file to calculate the offset.
Can also be a Map object with the filename contained.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the offset x and y (at the resolution of the file_home) in integers</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.calculate_scale">
<code class="descname">calculate_scale</code><span class="sig-paren">(</span><em>file_scaled</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.calculate_scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.calculate_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the scale of map object from the supplied file_scaled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_scaled</strong> (<em>str/Map</em>) – the path to the file to calculate the scale.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the scale (of the x dimension)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.check_map">
<code class="descname">check_map</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.check_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.check_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the dimensions for the map have been set and that the map file exists</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_cached_subset">
<code class="descname">get_cached_subset</code><span class="sig-paren">(</span><em>x_offset</em>, <em>y_offset</em>, <em>x_size</em>, <em>y_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_cached_subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_cached_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a subset of the map file, BUT rounds all numbers to integers to save RAM and keeps the entire array in
memory to speed up fetches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_offset</strong> – the x offset from the top left corner of the map</li>
<li><strong>y_offset</strong> – the y offset from the top left corner of the map</li>
<li><strong>x_size</strong> – the x size of the subset to obtain</li>
<li><strong>y_size</strong> – the y size of the subset to obtain</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a numpy array containing the subsetted data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_database_parameters">
<code class="descname">get_database_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_database_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_database_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the dispersal simulation parameters from the dispersal_db
:return: the dispersal simulation parameters</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_dimensions">
<code class="descname">get_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls read_dimensions() if dimensions have not been read, or reads stored information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list containing [0] x, [1] y, [2] upper left x, [3] upper left y, [4] x resolution, [5] y resolution</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the returned list will contain the x and y offset values instead of the ulx and uly values if the
dimensions have already been set (i.e. self.x_size != 0 and self.y_size != 0)</p>
</div>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_mean_dispersal">
<code class="descname">get_mean_dispersal</code><span class="sig-paren">(</span><em>database=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_mean_dispersal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_mean_dispersal" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the average dispersal for the map if test_mean_dispersal has already been run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ValueError if dispersal_database is None and so test_average_dispersal() has not been run</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">IOError if the output database does not exist</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>database</strong> (<em>str</em>) – the database to open</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the average dispersal from the database</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_mean_distance_travelled">
<code class="descname">get_mean_distance_travelled</code><span class="sig-paren">(</span><em>database=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_mean_distance_travelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_mean_distance_travelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the mean distance travelled for the map if test_mean_distance_travelled has already been run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ValueError if dispersal_database is None and so test_average_dispersal() has not been run</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">IOError if the output database does not exist</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>database</strong> (<em>str</em>) – the database to open</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the average dispersal from the database</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_subset">
<code class="descname">get_subset</code><span class="sig-paren">(</span><em>x_offset</em>, <em>y_offset</em>, <em>x_size</em>, <em>y_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a subset of the map file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_offset</strong> – the x offset from the top left corner of the map</li>
<li><strong>y_offset</strong> – the y offset from the top left corner of the map</li>
<li><strong>x_size</strong> – the x size of the subset to obtain</li>
<li><strong>y_size</strong> – the y size of the subset to obtain</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a numpy array containing the subsetted data</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.get_x_y">
<code class="descname">get_x_y</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.get_x_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.get_x_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply returns the x and y dimension of the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the x and y dimensions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.read_dimensions">
<code class="descname">read_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.read_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.read_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list containing the geospatial coordinate system for the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list containing [0] x, [1] y, [2] upper left x, [3] upper left y, [4] x resolution, [5] y resolution</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.set_dimensions">
<code class="descname">set_dimensions</code><span class="sig-paren">(</span><em>file_name=None</em>, <em>x_size=None</em>, <em>y_size=None</em>, <em>x_offset=None</em>, <em>y_offset=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.set_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.set_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the dimensions and file for the Map object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_name</strong> (<em>str</em>) – the location of the map object (a csv or tif file). If None, required that file_name is already provided.</li>
<li><strong>x_size</strong> (<em>int</em>) – the x dimension</li>
<li><strong>y_size</strong> (<em>int</em>) – the y dimension</li>
<li><strong>x_offset</strong> (<em>int</em>) – the x offset from the north-west corner</li>
<li><strong>y_offset</strong> (<em>int</em>) – the y offset from the north-west corner</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.set_sample">
<code class="descname">set_sample</code><span class="sig-paren">(</span><em>is_sample</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.set_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.set_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the is_sample attribute to true if this is a sample mask rather than an offset map</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>is_sample</strong> (<em>bool</em>) – indicates this is a sample mask rather than offset map</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.test_mean_dispersal">
<code class="descname">test_mean_dispersal</code><span class="sig-paren">(</span><em>number_repeats</em>, <em>output_database='output.db'</em>, <em>map_file=None</em>, <em>seed=1</em>, <em>dispersal_method='normal'</em>, <em>landscape_type='tiled'</em>, <em>sigma=1</em>, <em>tau=1</em>, <em>m_prob=0.0</em>, <em>cutoff=100</em>, <em>sequential=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.test_mean_dispersal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.test_mean_dispersal" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests the dispersal kernel on the provided map, producing a database containing each dispersal distance for
analysis purposes.</p>
<p>:note Will raise an IOError if the output database already has a table called DISPERSAL_DISTANCES</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>number_repeats</strong> (<em>int</em>) – the number of times to iterate on the map</li>
<li><strong>output_database</strong> (<em>str</em>) – the path to the output database</li>
<li><strong>map_file</strong> (<em>str</em>) – the path to the map file to iterate on</li>
<li><strong>seed</strong> (<em>int</em>) – the random seed</li>
<li><strong>dispersal_method</strong> (<em>str</em>) – the dispersal method to use (“normal”, “fat-tailed” or “norm-uniform”)</li>
<li><strong>landscape_type</strong> (<em>str</em>) – the landscape type to use (“infinite”, “tiled” or “closed”)</li>
<li><strong>sigma</strong> (<em>float</em>) – the sigma value to use for normal and norm-uniform dispersal</li>
<li><strong>tau</strong> (<em>float</em>) – the tau value to use for fat-tailed dispersal</li>
<li><strong>m_prob</strong> (<em>float</em>) – the m_prob to use for norm-uniform dispersal</li>
<li><strong>cutoff</strong> (<em>float</em>) – the cutoff value to use for norm-uniform dispersal</li>
<li><strong>sequential</strong> (<em>bool</em>) – if true, end locations of one dispersal event are used as the start for the next. Otherwise,</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>a new random cell is chosen</p>
</dd></dl>

<dl class="method">
<dt id="PyCoalescence.coalescence.Map.test_mean_distance_travelled">
<code class="descname">test_mean_distance_travelled</code><span class="sig-paren">(</span><em>number_repeats</em>, <em>number_steps</em>, <em>output_database='output.db'</em>, <em>map_file=None</em>, <em>seed=1</em>, <em>dispersal_method='normal'</em>, <em>landscape_type='tiled'</em>, <em>sigma=1</em>, <em>tau=1</em>, <em>m_prob=0.0</em>, <em>cutoff=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#Map.test_mean_distance_travelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.Map.test_mean_distance_travelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests the dispersal kernel on the provided map, producing a database containing the average distance travelled
after number_steps have been moved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>number_repeats</strong> (<em>int</em>) – the number of times to iterate on the map</li>
<li><strong>number_steps</strong> (<em>int</em>) – the number of steps to take each time before recording the distance travelled</li>
<li><strong>output_database</strong> (<em>str</em>) – the path to the output database</li>
<li><strong>map_file</strong> (<em>str</em>) – the path to the map file to iterate on</li>
<li><strong>seed</strong> (<em>int</em>) – the random seed</li>
<li><strong>dispersal_method</strong> (<em>str</em>) – the dispersal method to use (“normal”, “fat-tailed” or “norm-uniform”)</li>
<li><strong>landscape_type</strong> (<em>str</em>) – the landscape type to use (“infinite”, “tiled” or “closed”)</li>
<li><strong>sigma</strong> (<em>float</em>) – the sigma value to use for normal and norm-uniform dispersal</li>
<li><strong>tau</strong> (<em>float</em>) – the tau value to use for fat-tailed dispersal</li>
<li><strong>m_prob</strong> (<em>float</em>) – the m_prob to use for norm-uniform dispersal</li>
<li><strong>cutoff</strong> (<em>float</em>) – the cutoff value to use for norm-uniform dispersal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyCoalescence.coalescence.check_file_exists">
<code class="descname">check_file_exists</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/coalescence.html#check_file_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.coalescence.check_file_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the specified filename exists, if it is not “null” or “none”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_name</strong> – file path to check for</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">IOError if no file exists</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PyCoalescence.setup">
<span id="setup-file"></span><h3>setup file<a class="headerlink" href="#module-PyCoalescence.setup" title="Permalink to this headline">¶</a></h3>
<p>Sets up the NECSim executables. It configures the install by detecting system components and compiles the <code class="docutils literal"><span class="pre">c++</span></code> files,
if possible. Command line flags can be provided (see <a class="reference internal" href="README_PyCoalescence.html#sec-compilation-options"><span class="std std-ref">Compilation Options</span></a> for more
information) to modify the install.</p>
<dl class="function">
<dt id="PyCoalescence.setup.autoconf">
<code class="descname">autoconf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#autoconf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.autoconf" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the <cite>autoconf</cite> bash function (assuming that autoconf is available) to create the <cite>configure</cite> executable.</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.backup_makefile">
<code class="descname">backup_makefile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#backup_makefile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.backup_makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the makefile to a saved folder so that even if the original is overwritten, the last successful
compilation can be recorded.</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.clean">
<code class="descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#clean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs make clean in the NECSim directory to wipe any previous potential compile attempts.</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>opts=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs ./configure –opts with the supplied options. This should create the makefile for compilation, otherwise a
RuntimeError will be thrown.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>opts</strong> – a list of options to pass to the ./configure call</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.configure_and_compile">
<code class="descname">configure_and_compile</code><span class="sig-paren">(</span><em>argv=[None], logging_level=20</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#configure_and_compile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.configure_and_compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the configure script, then runs the compilation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>argv</strong> – the arguments to pass to configure script</li>
<li><strong>logging_level</strong> – the logging level to utilise (defaults to INFO).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.copy_makefile">
<code class="descname">copy_makefile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#copy_makefile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.copy_makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the backup makefile to the main directory, if it exists.
Throws an IOError if no makefile is found.</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.do_compile">
<code class="descname">do_compile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#do_compile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.do_compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles the c++ NECSim program by running make. This changes the working directory to wherever the module has been
installed for the subprocess call.</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.get_compilation_flags">
<code class="descname">get_compilation_flags</code><span class="sig-paren">(</span><em>display_warnings=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#get_compilation_flags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.get_compilation_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the compilation flags for passing to ./configure.
:param display_warnings: If true, runs with the -Wall flag for compilation (displaying all warnings). Default is False.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of compilation flags.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.move_executable">
<code class="descname">move_executable</code><span class="sig-paren">(</span><em>directory='/Users/samthompson/Documents/PhD/Code/PyCoalescence/PyCoalescence/build/default/'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#move_executable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.move_executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves the executable to the specified directory from within NECSim. Will always look for NECSim relative to the
setup.py (so can be called from another module location).
This allows for multiple compilation options with different versions stored in different folders.</p>
<p>Throws an IOError when the NECSim executable is not found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>directory</strong> – the directory to move the NECSim excecutable to.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.move_shared_object_file">
<code class="descname">move_shared_object_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#move_shared_object_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.move_shared_object_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves the shared object (.so) file to the build directory.
:return:</p>
</dd></dl>

<dl class="function">
<dt id="PyCoalescence.setup.run_configure">
<code class="descname">run_configure</code><span class="sig-paren">(</span><em>argv=[None], logging_level=20, display_warnings=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/setup.html#run_configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.setup.run_configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the install for compile options provided via the command line, or with default options if no options exist.
Running with <code class="docutils literal"><span class="pre">-help</span></code> or <cite>-h</cite> will display the compilation configurations called from <code class="docutils literal"><span class="pre">./configure</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argv</strong> – the arguments to pass to configure script</li>
<li><strong>logging_level</strong> – the logging level to utilise (defaults to INFO).</li>
<li><strong>display_warnings</strong> – If true, runs with the -Wall flag for compilation (displaying all warnings). Default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-PyCoalescence.hpc_setup">
<span id="hpc-setup-file"></span><h3>hpc_setup file<a class="headerlink" href="#module-PyCoalescence.hpc_setup" title="Permalink to this headline">¶</a></h3>
<p>Sets up the code for the hpc and moves the executable to the correct directory.</p>
<dl class="function">
<dt id="PyCoalescence.hpc_setup.build_hpc">
<code class="descname">build_hpc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyCoalescence/hpc_setup.html#build_hpc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyCoalescence.hpc_setup.build_hpc" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles NECSim with the <code class="docutils literal"><span class="pre">--with-hpc</span></code>, <code class="docutils literal"><span class="pre">--with-verbose</span></code> and <code class="docutils literal"><span class="pre">--with-fat_tail_dispersal</span></code> flags, and moves the
executable to ../../Code/ relative to the file location.
:return:</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/PyCoal_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyCoalescence package</a><ul>
<li><a class="reference internal" href="#module-contents">Module Contents</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a><ul>
<li><a class="reference internal" href="#module-PyCoalescence.batch_process">batch_process module</a></li>
<li><a class="reference internal" href="#module-PyCoalescence.coal_analyse">coal_analyse module</a></li>
<li><a class="reference internal" href="#module-PyCoalescence.coalescence">coalescence module</a></li>
<li><a class="reference internal" href="#module-PyCoalescence.setup">setup file</a></li>
<li><a class="reference internal" href="#module-PyCoalescence.hpc_setup">hpc_setup file</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="modules.html"
                        title="previous chapter">Modules</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/PyCoalescence.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyCoalescence 1.2.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Samuel Thompson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.
    </div>
  </body>
</html>